# –ì–ª–æ—Å—Å–∞—Ä–∏–π –ø–æ Flutter –¥–ª—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö —Ä–∞–±–æ—Ç

## –¢–µ—Ä–º–∏–Ω—ã

### Flutter
–û—Ç–∫—Ä—ã—Ç—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –æ—Ç Google –¥–ª—è –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–±–∏–ª—å–Ω—ã—Ö, –≤–µ–±- –∏ –Ω–∞—Å—Ç–æ–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ —è–∑—ã–∫–µ Dart.

### Dart
–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π Google. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ –≤ Flutter. –û–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.

### Widget
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ui —ç–ª–µ–º–µ–Ω—Ç–∞. –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ UI –≤–æ Flutter. –ë—ã–≤–∞—é—Ç **Stateless** (–Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ) –∏ **Stateful** (—Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è).

### State –≤–∏–¥–∂–µ—Ç–∞
–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

## –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Clean Architecture)

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Å—Ç–∏–ª—å, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π –†–æ–±–µ—Ä—Ç–æ–º –ú–∞—Ä—Ç–∏–Ω–æ–º, –≤ –∫–æ—Ç–æ—Ä–æ–º –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —É—Ä–æ–≤–Ω—è–º –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –≥–∏–±–∫–∏–º, —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–º –∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ–º—ã–º.

### –°–ª–æ–∏ —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

#### 1. Domain Layer (–î–æ–º–µ–Ω–Ω—ã–π —Å–ª–æ–π)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–ø–∏—Å—ã–≤–∞–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- **–û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã**:
  - **Entities** (—Å—É—â–Ω–æ—Å—Ç–∏): –±–∏–∑–Ω–µ—Å-–æ–±—ä–µ–∫—Ç—ã.
  - **Use Cases (interactors)**: –ø—Ä–∏–∫–ª–∞–¥–Ω–∞—è –ª–æ–≥–∏–∫–∞, –¥–µ–π—Å—Ç–≤–∏—è, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–µ –Ω–∞–¥ —Å—É—â–Ω–æ—Å—Ç—è–º–∏.
  - **Repository (interfaces)**: –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–µ use cases –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –¥–∞–Ω–Ω—ã–º. –ò—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å–ª–æ–µ –¥–∞–Ω–Ω—ã—Ö.
- **–ù–µ –∑–∞–≤–∏—Å–∏—Ç** –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ –∏–ª–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.

#### 2. Data Layer (–°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö (API, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∫—ç—à).
- **–û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã**:
  - **Repositories (implements)**: —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏–∑ domain —Å–ª–æ—è.
  - **Data Sources (local and remote)**: —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, HTTP-–∫–ª–∏–µ–Ω—Ç –∏–ª–∏ SQLite).
  - **Models**: DTO (Data Transfer Objects), –º–∞–ø–ø–µ—Ä—ã –º–µ–∂–¥—É JSON –∏ —Å—É—â–Ω–æ—Å—Ç—è–º–∏.

#### 3. Presentation Layer (–°–ª–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞.
- **–û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã**:
  - **UI Widgets**: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
  - **State Management**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (`Bloc`, `Provider`, `ChangeNotifier` –∏ –¥—Ä.).
  - **ViewModels / Controllers**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É UI –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π (Use Cases).

#### üî∂ 4. App Layer (–°–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- **–ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç**:
  - –ù–∞—Å—Ç—Ä–æ–π–∫—É —Ä–æ—É—Ç–∏–Ω–≥–∞, —Ç–µ–º, –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏.
  - –ò–Ω—ä–µ–∫—Ü–∏—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (DI).
  - –ì–ª–∞–≤–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ (`main.dart`) –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å–µ—Ä–≤–∏—Å–æ–≤.

>‚ö†Ô∏è **–ó–∞–º–µ—á–∞–Ω–∏–µ:** –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–¥—Ö–æ–¥–∞—Ö `App` —Å–ª–æ–π –æ–±—ä–µ–¥–∏–Ω—è—é—Ç —Å `Presentation` —Å–ª–æ–π. –í –Ω–∞—à–µ–º –∫—É—Ä—Å–µ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö —Ä–∞–±–æ—Ç –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥. –≠—Ç–æ —É–ø—Ä–æ—Å—Ç–∏—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–µ–∫—Ç–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.

## –ì—Ä–∞—Ñ–∏–∫ —Å–ª–æ—ë–≤ (ASCII)

    +---------------------+
    |      App Layer      |  ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê 
    |---------------------|                   ‚Üë
    | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è DI     |                   |
    | –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞         |                   |
    | –†–æ—É—Ç–∏–Ω–≥, —Ç–µ–º—ã –∏ —Ç.–¥.|                   |
    +---------------------+                   |
            |                                 |
            v                                 |
    +---------------------+                   |
    |   Presentation      |  ‚Üê  ‚Üê  ‚Üê  ‚Üê  ‚Üê  ‚Üê +
    |---------------------|
    | UI Widgets          |
    | State Management    |
    | ViewModels          |
    +---------------------+
            |
            v
    +---------------------+
    |      Domain         |
    |---------------------|
    | Entities            |
    | Use Cases           |
    | Repository Interface|
    +---------------------+
             å
            |
    +---------------------+
    |       Data          |
    |---------------------|
    | Repositories Impl   |
    | Data Sources        |
    | Models              |
    +---------------------+

> üìå **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –≤–Ω–∏–∑, —Ç–æ –µ—Å—Ç—å `Presentation` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `Domain`, –∞ `Domain` ‚Äî **–Ω–µ –∑–∞–≤–∏—Å–∏—Ç** –Ω–∏ –æ—Ç –∫–æ–≥–æ.

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Flutter –ø—Ä–æ–µ–∫—Ç–∞ –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º. Clean Arch (MVVM, DI, Bloc, Inversion of Control):  
  https://habr.com/ru/articles/833760/

- üì¶ Guide to app architecture:  
  https://docs.flutter.dev/app-architecture/guide

> üìå **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Ç—Ä–µ–±—É–µ—Ç –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –ù–æ –æ–Ω–æ –æ–∫—É–ø–∞–µ—Ç—Å—è, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –∫—Ä—É–ø–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö, –≥–¥–µ –≤–∞–∂–Ω–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å.

## Dependency Injection (DI)

Dependency Injection (–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π) ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± **–ø–µ—Ä–µ–¥–∞—Ç—å –Ω—É–∂–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)** –≤ –∫–ª–∞—Å—Å **—Å–Ω–∞—Ä—É–∂–∏**, –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏—Ö –≤–Ω—É—Ç—Ä–∏.

> üìå **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∫–ª–∞—Å—Å —Å–∞–º —Å–æ–∑–¥–∞–≤–∞–ª –≤—Å—ë —Ç–æ, —á—Ç–æ –µ–º—É –Ω—É–∂–Ω–æ ‚Äî –æ–Ω –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã –∏–∑–≤–Ω–µ.

### –ü—Ä–∏–º–µ—Ä –±–µ–∑ DI (–ø–ª–æ—Ö–æ):

```dart
class AuthService {
  final ApiClient api = ApiClient(); // üëé —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤–Ω—É—Ç—Ä–∏
}
```

> ‚ö†Ô∏è **–ü—Ä–æ–±–ª–µ–º–∞:** –µ—Å–ª–∏ –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ –∑–∞–º–µ–Ω–∏—Ç—å ApiClient –Ω–∞ –¥—Ä—É–≥—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–µ–π–∫–æ–≤—É—é –¥–ª—è —Ç–µ—Å—Ç–æ–≤) –∏ —Ç–∞–∫–∏—Ö –º–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ ‚Äî –±—É–¥–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω–æ.

### –ü—Ä–∏–º–µ—Ä —Å DI (—Ö–æ—Ä–æ—à–æ):

```dart
class AuthService {
  const AuthService(this.api); // üëç –ø–æ–ª—É—á–∞–µ–º —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

  final ApiClient api;
}
```

–¢–µ–ø–µ—Ä—å `AuthService` –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ `ApiClient` –ø–µ—Ä–µ–¥–∞–Ω ‚Äî –º—ã –º–æ–∂–µ–º –ª–µ–≥–∫–æ –µ–≥–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –∏–ª–∏ –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º–∞.

### –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ DI –≤–æ Flutter

1. –†—É—á–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ (Manual DI)
–í—ã —Å–∞–º–∏ –ø–µ—Ä–µ–¥–∞—ë—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –∏–ª–∏ –º–µ—Ç–æ–¥—ã.

```dart
final api = ApiClient();
final authService = AuthService(api);
```

üëç –ü—Ä–æ—Å—Ç–æ.
üëé –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—É–¥–æ–±–Ω–æ –≤ –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

2. Service Locator (–Ω–∞–ø—Ä–∏–º–µ—Ä, `get_it`) *
–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º **—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**, –∞ –ø–æ—Ç–æ–º **–¥–æ—Å—Ç–∞—é—Ç—Å—è –æ—Ç—Ç—É–¥–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É**.

```dart
final getIt = GetIt.instance;

void setup() {
    getIt.registerSingleton<ApiClient>(ApiClient());
    getIt.registerSingleton<AuthService>(AuthService(getIt<ApiClient>()));
}

final auth = getIt<AuthService>();
```

üëé –°–∫—Ä—ã—Ç–∞—è –ª–æ–≥–∏–∫–∞, —Å–ª–æ–∂–Ω–µ–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å.

üì¶ –ü–∞–∫–µ—Ç: https://pub.dev/packages/get_it

> ‚ùó **–í–∞–∂–Ω–æ:** `get_it` ‚Äî —ç—Ç–æ –Ω–µ –ø–∞—Ç—Ç–µ—Ä–Ω Dependency Injection, –∞ Service Locator, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —Å–∫—Ä—ã–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —É—Å–ª–æ–∂–Ω—è—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ DI —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ.

3. DI —Å –∞–≤—Ç–æ-–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π (`injectable` + `get_it`)
–í—ã –æ–ø–∏—Å—ã–≤–∞–µ—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏, –∞ –∫–æ–¥ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

```dart
@Injectable()
class AuthService {
    const AuthService(this.api);
    final ApiClient api;
}
```

üëç –û—á–µ–Ω—å —É–¥–æ–±–Ω–æ –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
üëé –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `build_runner`.

üì¶ –ü–∞–∫–µ—Ç: https://pub.dev/packages/injectable

## –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∏ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

> üß© –í —ç—Ç–æ–π —á–∞—Å—Ç–∏ –≥–ª–æ—Å—Å–∞—Ä–∏—è –º—ã –∫—Ä–∞—Ç–∫–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ—Å–Ω–æ–≤–Ω—ã–µ **—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ** –∏ **–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ** –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –≤—ã —Å—Ç–æ–ª–∫–Ω—ë—Ç–µ—Å—å –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ Flutter-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

### –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è?

**–ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (design patterns)** ‚Äî —ç—Ç–æ **–≥–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã —Ä–µ—à–µ–Ω–∏–π —Ç–∏–ø–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á**, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º. –û–Ω–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∫–æ–¥–æ–º, –∞ –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç **—Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –ø–æ–¥—Ö–æ–¥** –∫ —Ä–µ—à–µ–Ω–∏—é –∑–∞–¥–∞—á–∏.

–ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–µ–ª—è—Ç—Å—è –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
- **–°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ** ‚Äî –æ–ø–∏—Å—ã–≤–∞—é—Ç, –∫–∞–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–≤—è–∑–∞–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π.
- **–ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ** ‚Äî –æ–ø–∏—Å—ã–≤–∞—é—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Ö –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º.
- **–ü–æ—Ä–æ–∂–¥–∞—é—â–∏–µ** - –æ–ø–∏—Å—ã–≤–∞—é—Ç, –∫–∞–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è.

### üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

#### Repository

- **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**: –ê–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ç—å, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –∫—ç—à –∏ —Ç.–¥.).
- **–ó–∞—á–µ–º –Ω—É–∂–µ–Ω**: UI –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ç–æ–≥–æ, –æ—Ç–∫—É–¥–∞ –ø—Ä–∏—Ö–æ–¥—è—Ç –¥–∞–Ω–Ω—ã–µ.
- **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –í `Domain` —Å–ª–æ–µ (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å) –∏ –≤ `Data` —Å–ª–æ–µ (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è).
  
**–ü—Ä–∏–º–µ—Ä:**
```dart
abstract class UserRepository {
    Future<User> getUser();
}

class ApiUserRepository implements UserRepository {
    @override
    Future<User> getUser() {
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ API
    }
}
```

### üé≠ –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

#### Observer

- **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, UI) "–ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è" –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è.
- **–ó–∞—á–µ–º –Ω—É–∂–µ–Ω:** –†–µ–∞–ª–∏–∑—É–µ—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ ‚Äî UI —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

**–ü—Ä–∏–º–µ—Ä —Å `ChangeNotifier`:**

```dart
class CounterModel extends ChangeNotifier {
    int _count = 0;

    int get count => _count;

    void increment() {
    _count++;
    notifyListeners(); // üîî –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
    }
}
```

**–í UI:**

```dart
Consumer<CounterModel>(
    builder: (_, int model, __) => Text('${model.count}'),
)
```

### State

- **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç—É –º–µ–Ω—è—Ç—å —Å–≤–æ—ë –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
- **–ó–∞—á–µ–º –Ω—É–∂–µ–Ω:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–æ–π –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–∑–∞–≥—Ä—É–∑–∫–∞, –æ—à–∏–±–∫–∞, –¥–∞–Ω–Ω—ã–µ).

**–ü—Ä–∏–º–µ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏–π —ç–∫—Ä–∞–Ω–∞:**

```dart
abstract class AuthState {}

class AuthInitial extends AuthState {}
class AuthLoading extends AuthState {}
class AuthSuccess extends AuthState {}
class AuthError extends AuthState {}
```

**–í UI:**

```dart
if (state is AuthLoading) {
    return CircularProgressIndicator();
} else if (state is AuthSuccess) {
    return Text("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!");
}
```

**–£–ø—Ä–æ—â–µ–Ω–Ω—É—é –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é —Å–≤—è–∑–µ–π –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Ç–∞–∫:**

    UI (View)
    |
    ‚Üì
    Observer  ‚Üê –ø–æ–¥–ø–∏—Å–∫–∞
    |
    ‚Üì
    State (—Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
    ‚Üë
    |
    Repository ‚Üê –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –¥–∞–Ω–Ω—ã–º

## üèóÔ∏è –ü–æ—Ä–æ–∂–¥–∞—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

> –≠—Ç–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Ä–µ—à–∞—é—Ç –∑–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤: **–∫–æ–≥–¥–∞, –∫–∞–∫ –∏ –∫–∞–∫–∏–º —Å–ø–æ—Å–æ–±–æ–º** —Å–æ–∑–¥–∞–≤–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–ª–∞—Å—Å–æ–≤. –û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω—ã, –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç —Å–ª–æ–∂–Ω—ã–π, —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–ª–∏ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω).

### Singleton (–û–¥–∏–Ω–æ—á–∫–∞)

- **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —É –∫–ª–∞—Å—Å–∞ –±—É–¥–µ—Ç **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä** –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫ –Ω–µ–º—É –≥–ª–æ–±–∞–ª—å–Ω—É—é —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞.
- **–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è**: –î–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –≤ –æ–¥–Ω–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Logger`, `AuthService`, `AppConfig`).
- –í–æ Flutter –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å `get_it`, –Ω–æ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –≤—Ä—É—á–Ω—É—é, —á—Ç–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –±–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π.

**–ü—Ä–∏–º–µ—Ä:**
```dart
class Logger {
    const Logger._internal(); // –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

    factory Logger() => _instance;

    static final Logger _instance = Logger._internal();

    void log(String message) => print(message);
}
```

### ü§î –ê –∫–∞–∫ –Ω–∞—Å—á—ë—Ç Dependency Injection?

Dependency Injection ‚Äî —ç—Ç–æ **–Ω–µ –ø–∞—Ç—Ç–µ—Ä–Ω**, –∞ **–ø—Ä–∏–Ω—Ü–∏–ø –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**. –û–Ω –æ–ø–∏—Å—ã–≤–∞–µ—Ç **–ø–æ–¥—Ö–æ–¥**, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–æ–±—ä–µ–∫—Ç—ã, –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–≤–∏—Å–∏—Ç –∫–ª–∞—Å—Å) **–ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∏–∑–≤–Ω–µ**, –∞ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞. –û–¥–Ω–∞–∫–æ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ DI —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **–ø–æ—Ä–æ–∂–¥–∞—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã**.
